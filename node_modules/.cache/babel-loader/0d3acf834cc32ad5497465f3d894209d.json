{"ast":null,"code":"import _objectSpread from \"/home/pavel/Desktop/React/unShiftTest/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport apiRequests from './../api/api';\nconst SET_POSTS = 'SET_POSTS';\nconst ADD_POST = 'ADD_POST';\nconst CHANGE_POST = 'EDIT_POST';\nconst DELETE_POST = 'DELETE_POST';\nconst ADD_COMMENT = 'ADD_COMMENT';\nconst initialState = {\n  postsData: []\n};\n\nconst appReducer = (appData = initialState, action) => {\n  switch (action.type) {\n    case SET_POSTS:\n      {\n        return _objectSpread({}, appData, {\n          postsData: action.posts\n        });\n      }\n\n    case ADD_POST:\n      {\n        return _objectSpread({}, appData, {\n          postsData: [...appData.postsData, _objectSpread({\n            id: appData.postsData.length + 1\n          }, action.post, {\n            comments: []\n          })]\n        });\n      }\n\n    case CHANGE_EDITABLE_POST:\n      {\n        return _objectSpread({}, appData, {\n          editablePost: action.post\n        });\n      }\n\n    case CHANGE_POST:\n      {\n        return _objectSpread({}, appData, {\n          postsData: appData.postsData.map(post => {\n            return post.id !== action.post.id ? post : _objectSpread({}, action.post, {\n              comments: post.comments\n            });\n          })\n        });\n      }\n\n    case DELETE_POST:\n      {\n        return _objectSpread({}, appData, {\n          postsData: appData.postsData.filter(post => {\n            return post.id !== action.postId ? true : false;\n          })\n        });\n      }\n\n    case ADD_COMMENT:\n      {\n        return _objectSpread({}, appData, {\n          postsData: appData.postsData.map(post => {\n            return post.id !== action.postId ? post : _objectSpread({}, post, {\n              comments: [...post.comments, action.comment]\n            });\n          })\n        });\n      }\n\n    default:\n      return appData;\n  }\n};\n\nexport const setPosts = posts => {\n  return {\n    type: SET_POSTS,\n    posts\n  };\n};\nexport const addPost = post => {\n  return {\n    type: ADD_POST,\n    post\n  };\n};\nexport const changeEditablePost = post => {\n  return {\n    type: CHANGE_EDITABLE_POST,\n    post\n  };\n};\nexport const changePost = post => {\n  return {\n    type: CHANGE_POST,\n    post\n  };\n};\nexport const deletePost = postId => {\n  return {\n    type: DELETE_POST,\n    postId\n  };\n};\nexport const addComment = (comment, postId) => {\n  return {\n    type: ADD_POST,\n    comment,\n    postId\n  };\n};\nexport const getPostsTC = () => dispatch => {\n  apiRequests.getPostsData().then(data => {\n    return Promise.all(data.map(post => apiRequests.getComments(post.id)));\n  }).then(posts => {\n    dispatch(setPosts(posts));\n  });\n};\nexport const addPostTC = post => dispatch => {\n  apiRequests.addPost(post).then(dispatch(addPost(post)));\n};\nexport const changePostTC = post => dispatch => {\n  apiRequests.updatePost(post).then(dispatch(changePost(post)));\n};\nexport const deletePostTC = postId => dispatch => {\n  apiRequests.deletePost(postId).then(dispatch(deletePost(postId)));\n};\nexport const addCommentTC = (comment, postId) => dispatch => {\n  apiRequests.addComment(postId, comment.body).then(dispatch(addComment(comment, postId)));\n};\nexport default appReducer;","map":{"version":3,"sources":["/home/pavel/Desktop/React/unShiftTest/src/redux/app-reducer.js"],"names":["apiRequests","SET_POSTS","ADD_POST","CHANGE_POST","DELETE_POST","ADD_COMMENT","initialState","postsData","appReducer","appData","action","type","posts","id","length","post","comments","CHANGE_EDITABLE_POST","editablePost","map","filter","postId","comment","setPosts","addPost","changeEditablePost","changePost","deletePost","addComment","getPostsTC","dispatch","getPostsData","then","data","Promise","all","getComments","addPostTC","changePostTC","updatePost","deletePostTC","addCommentTC","body"],"mappings":"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","sourcesContent":["import apiRequests from './../api/api';\n\nconst SET_POSTS = 'SET_POSTS';\nconst ADD_POST = 'ADD_POST';\nconst CHANGE_POST = 'EDIT_POST';\nconst DELETE_POST = 'DELETE_POST';\nconst ADD_COMMENT = 'ADD_COMMENT';\n\nconst initialState = {\n    postsData: [],\n};\n\nconst appReducer = (appData = initialState, action) => {\n    switch (action.type) {\n        case SET_POSTS: {\n            return {\n                ...appData,\n                postsData: action.posts,\n            }\n        }\n\n        case ADD_POST: {\n            return {\n                ...appData,\n                postsData: [...appData.postsData, {id: appData.postsData.length + 1, ...action.post, comments: []}],\n            }\n        }   \n        \n        case CHANGE_EDITABLE_POST: {\n            return {\n                ...appData,\n                editablePost: action.post,\n            }\n        }\n        \n        case CHANGE_POST: {\n            return {\n                ...appData,\n                postsData: appData.postsData.map(post => {\n                    return post.id !== action.post.id ? post : {...action.post, comments: post.comments} \n                })\n            }\n        } \n\n        case DELETE_POST: {\n            return {\n                ...appData,\n                postsData: appData.postsData.filter(post => {\n                    return post.id !== action.postId ? true : false \n                })\n            }\n        }\n\n        case ADD_COMMENT: {\n            return {\n                ...appData,\n                postsData: appData.postsData.map(post => {\n                    return post.id !== action.postId ? post : {\n                        ...post, \n                        comments: [...post.comments, action.comment]\n                    } \n                })\n            }\n        }\n\n        default: return appData;\n    }\n\n}\n\nexport const setPosts = (posts) => {\n    return {\n        type: SET_POSTS,\n        posts\n    }\n}\n\nexport const addPost = (post) => {\n    return {\n        type: ADD_POST,\n        post\n    }\n}\n\nexport const changeEditablePost = (post) => {\n    return {\n        type: CHANGE_EDITABLE_POST,\n        post\n    }\n}\n\nexport const changePost = (post) => {\n    return {\n        type: CHANGE_POST,\n        post\n    }\n}\n\nexport const deletePost = (postId) => {\n    return {\n        type: DELETE_POST,\n        postId\n    }\n}\n\nexport const addComment = (comment, postId) => {\n    return {\n        type: ADD_POST,\n        comment,\n        postId\n    }\n}\n\nexport const getPostsTC = () => (dispatch) => {\n    apiRequests.getPostsData()\n    .then(data => {\n        return Promise.all(data.map(post => apiRequests.getComments(post.id)))\n        \n    }).then((posts) => {\n        dispatch(setPosts(posts));\n      }); \n    \n}\n\nexport const addPostTC = (post) => (dispatch) => {\n    apiRequests.addPost(post)\n    .then(dispatch(addPost(post)));\n}\n\nexport const changePostTC = (post) => (dispatch) => {\n    apiRequests.updatePost(post)\n    .then(dispatch(changePost(post)));\n}\n\nexport const deletePostTC = (postId) => (dispatch) => {\n    apiRequests.deletePost(postId)\n    .then(dispatch(deletePost(postId)));\n}\n\nexport const addCommentTC = (comment, postId) => (dispatch) => {\n    apiRequests.addComment(postId, comment.body)\n    .then(dispatch(addComment(comment, postId)));\n}\n\nexport default appReducer;"]},"metadata":{},"sourceType":"module"}