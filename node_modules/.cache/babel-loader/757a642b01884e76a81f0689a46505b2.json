{"ast":null,"code":"import _toConsumableArray from\"/home/pavel/Desktop/React/unShiftTest/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/pavel/Desktop/React/unShiftTest/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import apiRequests from'./../api/api';var SET_POSTS='SET_POSTS';var ADD_POST='ADD_POST';var CHANGE_POST='EDIT_POST';var DELETE_POST='DELETE_POST';var ADD_COMMENT='ADD_COMMENT';var initialState={postsData:[]};var appReducer=function appReducer(){var appData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_POSTS:{return _objectSpread({},appData,{postsData:action.posts});}case ADD_POST:{return _objectSpread({},appData,{postsData:[].concat(_toConsumableArray(appData.postsData),[_objectSpread({},action.post,{comments:[]})])});}case CHANGE_POST:{return _objectSpread({},appData,{postsData:appData.postsData.map(function(post){return post.id!==action.post.id?post:action.post;})});}case DELETE_POST:{return _objectSpread({},appData,{postsData:appData.postsData.filter(function(post){return post.id!==action.postId?true:false;})});}case ADD_COMMENT:{debugger;return _objectSpread({},appData,{postsData:appData.postsData.map(function(post){return post.id!==action.comment.postId?post:_objectSpread({},post,{comments:[].concat(_toConsumableArray(post.comments),[action.comment])});})});}default:return appData;}};export var setPosts=function setPosts(posts){return{type:SET_POSTS,posts:posts};};export var addPost=function addPost(post){return{type:ADD_POST,post:post};};export var changePost=function changePost(post){return{type:CHANGE_POST,post:post};};export var deletePost=function deletePost(postId){return{type:DELETE_POST,postId:postId};};export var addComment=function addComment(comment){return{type:ADD_COMMENT,comment:comment};};export var getPostsTC=function getPostsTC(){return function(dispatch){apiRequests.getPostsData().then(function(data){return Promise.all(data.map(function(post){return apiRequests.getComments(post.id);}));}).then(function(posts){dispatch(setPosts(posts));});};};export var addPostTC=function addPostTC(post){return function(dispatch){apiRequests.addPost(post).then(function(data){return dispatch(addPost(data));});};};export var changePostTC=function changePostTC(post){return function(dispatch){apiRequests.updatePost(post).then(dispatch(changePost(post)));};};export var deletePostTC=function deletePostTC(postId){return function(dispatch){apiRequests.deletePost(postId).then(dispatch(deletePost(postId)));};};export var addCommentTC=function addCommentTC(comment,postId){return function(dispatch){apiRequests.addComment(postId,comment.body).then(function(comment){return dispatch(addComment(comment));});};};export default appReducer;","map":{"version":3,"sources":["/home/pavel/Desktop/React/unShiftTest/src/redux/app-reducer.js"],"names":["apiRequests","SET_POSTS","ADD_POST","CHANGE_POST","DELETE_POST","ADD_COMMENT","initialState","postsData","appReducer","appData","action","type","posts","post","comments","map","id","filter","postId","comment","setPosts","addPost","changePost","deletePost","addComment","getPostsTC","dispatch","getPostsData","then","data","Promise","all","getComments","addPostTC","changePostTC","updatePost","deletePostTC","addCommentTC","body"],"mappings":"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","sourcesContent":["import apiRequests from './../api/api';\n\nconst SET_POSTS = 'SET_POSTS';\nconst ADD_POST = 'ADD_POST';\nconst CHANGE_POST = 'EDIT_POST';\nconst DELETE_POST = 'DELETE_POST';\nconst ADD_COMMENT = 'ADD_COMMENT';\n\nconst initialState = {\n    postsData: [],\n};\n\nconst appReducer = (appData = initialState, action) => {\n    switch (action.type) {\n        case SET_POSTS: {\n            return {\n                ...appData,\n                postsData: action.posts,\n            }\n        }\n\n        case ADD_POST: {\n            return {\n                ...appData,\n                postsData: [...appData.postsData, {...action.post, comments: []}],\n            }\n        }   \n        \n        case CHANGE_POST: {\n            return {\n                ...appData,\n                postsData: appData.postsData.map(post => {\n                    return post.id !== action.post.id ? post : action.post \n                })\n            }\n        } \n\n        case DELETE_POST: {\n            return {\n                ...appData,\n                postsData: appData.postsData.filter(post => {\n                    return post.id !== action.postId ? true : false \n                })\n            }\n        }\n\n        case ADD_COMMENT: {\n    debugger;\n\n            return {\n                ...appData,\n                postsData: appData.postsData.map(post => {\n                    return post.id !== action.comment.postId ? post : {\n                        ...post, \n                        comments: [...post.comments, action.comment]\n                    } \n                })\n            }\n        }\n\n        default: return appData;\n    }\n\n}\n\nexport const setPosts = (posts) => {\n    return {\n        type: SET_POSTS,\n        posts\n    }\n}\n\nexport const addPost = (post) => {\n    return {\n        type: ADD_POST,\n        post\n    }\n}\n\nexport const changePost = (post) => {\n    return {\n        type: CHANGE_POST,\n        post\n    }\n}\n\nexport const deletePost = (postId) => {\n    return {\n        type: DELETE_POST,\n        postId\n    }\n}\n\nexport const addComment = (comment) => {\n    return {\n        type: ADD_COMMENT,\n        comment\n    }\n}\n\nexport const getPostsTC = () => (dispatch) => {\n    apiRequests.getPostsData()\n    .then(data => {\n        return Promise.all(data.map(post => apiRequests.getComments(post.id)))  \n    })\n    .then(posts => {\n        dispatch(setPosts(posts));\n    }); \n}\n\nexport const addPostTC = (post) => (dispatch) => {\n    apiRequests.addPost(post)\n    .then(data => dispatch(addPost(data)));\n}\n\nexport const changePostTC = (post) => (dispatch) => {\n    apiRequests.updatePost(post)\n    .then(dispatch(changePost(post)));\n}\n\nexport const deletePostTC = (postId) => (dispatch) => {\n    apiRequests.deletePost(postId)\n    .then(dispatch(deletePost(postId)));\n}\n\nexport const addCommentTC = (comment, postId) => (dispatch) => {\n    apiRequests.addComment(postId, comment.body)\n    .then(comment => dispatch(addComment(comment)));\n}\n\nexport default appReducer;"]},"metadata":{},"sourceType":"module"}